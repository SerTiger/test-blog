function initTableNews(){document.getElementById("datatable1")&&($(document).ajaxComplete(function(){$(".ajax_ckeckbox").bootstrapToggle()}),$(document).on("change",".ajax_ckeckbox",function(e){const t=$(this).data("field"),a=$(this).data("id"),n=$(this).data("token"),i=$(this).is(":checked")?1:0,r=$(this).data("url");$.ajax({type:"POST",url:r,data:{_token:n,id:a,field:t,value:i},success:function(e){toastr.success("Статус Успешно обновлен","Succsess"),console.log("succsess")},error:function(e){toastr.error("Ошыбка","Error"),console.log("error")}})}))}function translite(e){e=e.toLowerCase();for(var t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sh","ъ":"~","ы":"y","ь":"~","э":"e","ю":"yu","я":"ya"},a="",n=0;n<e.length;n++)/[а-яё]/.test(e.charAt(n))?a+=t[e.charAt(n)]:/[a-z0-9]/.test(e.charAt(n))?a+=e.charAt(n):"-"!==a.slice(-1)&&(a+="-");return a.replace(/~/g,"")}$(document).ready(function(){$(document).on("click",".btnAdd",function(){let e=$(this).parent().parent().find("table"),t=1,a=e.find("tr").length,n=e.find("tr").first().find("td"),i=e.find("tr").last(),r=i.find("td");delete r[0];let l=[],o=0;r.each(function(){let e=$(this).attr("id");void 0!==e&&(l[o]=e,o++)});let d=null;i&&(d=i.attr("class").split(/\s+/)[0].replace("row",""));let c=d?parseInt(d)+1:a,s=n.length-3,f=e.attr("data-table-key");for(;t-- >0;){e.append('<tr class="row'+c+'"><td>\n                                    <a class="btn btn-danger btn-xs action destroy-row mr-2"><i class="fas fa-times"></i></a>\n                                </td></tr>');for(let t=0;t<s;t++){let a=null;l[t]&&(a=i.find("td#"+l[t]).find("div").first().attr("data-col"));let r=$(n.first()).clone();r.attr("hidden",!1);let o=a||t+1;r[0].innerHTML=r[0].innerHTML.replace(/replacetable/g,f).replace(/replasemerow/g,c).replace(/replacecol/g,o).replace(/replace_data_col/g,o).replace(/replace_data_row/g,c),r.attr("id",t+1),e.find("tr.row"+c).append(r)}c++}}),$(document).on("click",".btnAddCol",function(){let e=$(this).parent().parent().find("table"),t=e.attr("data-table-key"),a=e.find("tr").first().find("td");e.find("tr").not("tr.buttons").each(function(e){let n=$(this).find("td").last().find("div").attr("data-col");n&&(n=parseInt(n)+1),n=n||a.length-2;let i=$(this).find("td").last().find("div").attr("data-row");i||(i=e+1);let r=$(a.first()).clone();r.attr("hidden",!1),r[0].innerHTML=r[0].innerHTML.replace(/replacetable/g,t).replace(/replasemerow/g,i).replace(/replacecol/g,n).replace(/replace_data_col/g,n).replace(/replace_data_row/g,i),r.attr("id",n),$(this).append(r)}),e.find("tr.buttons").each(function(e){let t=$(this).find("td").last().find("div").attr("data-col");t&&(t=parseInt(t)+1),t=t||a.length-2;let n=$("td.col0").first().clone();n.attr("hidden",!1),n.attr("class","col"+t+" text-center pb-2 "),n[0].innerHTML=n[0].innerHTML.replace(/replacecol/g,t),$(this).append(n)})}),$(".addTable").click(function(){let e=$(this).parents(".myform").find("table").eq(-2).attr("data-table-key");e=e?parseInt(e)+1:1;let t=$("#duplicateTable").clone();t.removeAttr("id"),t.removeAttr("hidden"),t.addClass("table-wrap"),t[0].innerHTML=t[0].innerHTML.replace(/replacetable/g,e),t.insertBefore(".addTable")}),$(document).on("click",".btnDelete",function(){let e=$(this).parents(".table-wrap"),t=e.find("table").attr("data-table-key"),a=$(".deleted-table ").val();""===a?$(".deleted-table ").val(t):$(".deleted-table ").val(a+","+t),e.remove()}),$(document).on("click",".destroy-row",function(){let e=$(this).parents("table").attr("data-table-key"),t=$(this).parents("tr"),a=$(this).parents("tr").attr("class").replace("row",""),n=$(".deleted-row ").val();""===n?$(".deleted-row").val(e+":"+a):$(".deleted-row").val(n+","+e+":"+a),t.remove()}),$(document).on("click",".destroy-column",function(){let e=$(this).parent("td"),t=e.attr("class").split(/\s+/)[0].replace("col",""),a=$(this).parents("table").find("td"),n=$(this).parents("table").attr("data-table-key"),i=!0;a.each(function(){if($(this).attr("id")===t){if(i){let e=$(this).find("div").attr("data-col"),t=$(".deleted-column ").val();""===t?$(".deleted-column").val(n+":"+e):$(".deleted-column").val(t+","+n+":"+e),i=!1}$(this).remove()}}),e.remove()}),$("body").on("change","#is_title_select",function(){const e=$(this).closest(".duplication-row");"1"===$(this).children("option:selected").val()?$(e).find("#position-div").show():$(e).find("#position-div").hide()}),window._token=$('meta[name="csrf-token"]').attr("content"),moment.updateLocale("en",{week:{dow:1}}),$(".date").datetimepicker({format:"YYYY-MM-DD",locale:"en"}),$(".datetime").datetimepicker({format:"YYYY-MM-DD HH:mm:ss",locale:"en",sideBySide:!0}),$(".timepicker").datetimepicker({format:"HH:mm:ss"}),$(".select-all").click(function(){let e=$(this).parent().siblings(".select2");e.find("option").prop("selected","selected"),e.trigger("change")}),$(".deselect-all").click(function(){let e=$(this).parent().siblings(".select2");e.find("option").prop("selected",""),e.trigger("change")}),$(".select2").select2(),$(".treeview").each(function(){var e=!1;$(this).find("li").each(function(){$(this).hasClass("active")&&(e=!0)}),e&&$(this).addClass("active")}),$(document).on("click",".btn btn-success",function(){$(".alert").delay(1).fadeOut("slow",function(){$(this).remove()})}),$(document).on("click","#removeImage",function(){let e=$(this);e.parents("#image-wrap").find(".isRemoveImage").val("1"),e.parents("#image-wrap").find("#preview").attr("src",e.parents("#image-wrap").find("#preview").attr("data-default")),e.parents("#image-wrap").find("#input-file").val(""),e.parents("#image-wrap").find("#removeImage").attr("hidden",!0),e.parents("#image-setting").find("#place-select").val("0"),e.parents("#image-setting").find("#image-placing").attr("hidden",!0)}),$(document).on("change",".input-file",function(){let e=$(this);e.parents("#image-wrap").find("#removeImage").attr("hidden",!1),e.parents("#image-setting").find("#image-placing").attr("hidden",!1)}),$(".with-loading").on("click",function(){return $(this).find("loading").length||new Loading($(this)),setTimeout(()=>{var e;if((e=$(this).closest("form")).length)return e.submit()},200)}),$(document).ready(function(){$(".toogle").bootstrapToggle()})}),Loading=class{constructor(e){var t;this.obj=e,$('<div id="loader" class="loading"><i class="fa fa-cog fa-spin" aria-hidden="true"></i></div>').appendTo(this.obj),"absolute"!==(t=this.obj.css("position"))&&"fixed"!==t&&"relative"!==t&&this.obj.css("position","relative")}hide(){return this.obj.find(".loading").remove()}},initTableNews(),window.ic=1,window.duplicate_row=function(e){var t,a;if(0!==(t=(a=e.hasClass("duplication")?e:e.closest(".duplication")).find(".duplicate").clone(!0)).length)return window.ic++,t[0].innerHTML=t[0].innerHTML.replace(/replaseme/g,window.ic),t.removeClass("duplicate").insertBefore(a.find(".duplication-button")),t.find(".form-control").each(function(){if($(this).attr("name",$(this).data("name")),$(this).data("required"))return $(this).attr("required",$(this).data("required"))}),t.attr("data-init")||(CKEDITOR.replace("cloned-editor["+window.ic+"][ru]"),CKEDITOR.replace("cloned-editor["+window.ic+"][en]"),CKEDITOR.replace("cloned-editor["+window.ic+"][uk]")),!0},$(document).ready(function(){return window.ic=$(".duplication-row").length,$(".duplication.duplicate-on-start").each(function(){return duplicate_row($(this))}),$(document).on("click",".duplication .create",function(){return duplicate_row($(this))}),$(document).on("click",".duplication .destroy",function(){var e,t,a;return(e=$(this)).hasClass("exist")&&(t=e.data("id"))&&(a=$(this).data("name"),$(this).closest("form").append('<input type="hidden" name="'+a+'" value="'+t+'" />')),$(this).closest(".duplication-row").remove()})}),$(document).on("change",".input-file",function(e){var t=e.target.files[0].name;$("#file").val(t);$(this);let a=$(this).parent("div").find("img");var n=new FileReader;n.onload=function(e){a.attr("src",e.target.result)},n.readAsDataURL(this.files[0])}),$(document).ready(function(){CKEDITOR.config.removePlugins="elementspath",CKEDITOR.config.enterMode=CKEDITOR.ENTER_BR,CKEDITOR.config.shiftEnterMode=CKEDITOR.ENTER_P,CKEDITOR.config.filebrowserImageBrowseUrl="/file-manager/ckeditor",CKEDITOR.config.allowedContent=!0}),$(document).ready(function(){$(document).on("click",".generate_slug",function(e){e.preventDefault();var t=$(".generate_value").val();if(t){$(".generate_info").attr("hidden",!0);var a=translite(t);$(".slug_value").val(""),$(".slug_value").val(a)}else $(".generate_info").removeAttr("hidden")})});
